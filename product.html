<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="keywords"
            content="–û–±—É–≤—å, –∂–µ–Ω—Å–∫–∞—è –æ–±—É–≤—å –±–æ–ª—å—à–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤, Talaria, —Ç–∞–ª–∞—Ä–∏–∞, –¢–ê–õ–ê–†–ò–ê, –∑–µ–º—Ñ–∏—Ä–∞ –º–∞–≥–∞–∑–∏–Ω, —É–¥–æ–±–Ω–∞—è –æ–±—É–≤—å, –∫—É–ø–∏—Ç—å –æ–±—É–≤—å –≤ —Ç–∞—à–∫–µ–Ω—Ç–µ, ZAZA, –µ–≤—Ä–æ–º–æ–¥–∞, —Ä–æ–±–∏–Ω, –º–∏—Å—Å –º–∞—Ä–∏—Å, vacs, –¢—É—Ä—Ü–∏—è, –ü–µ–∫–∏–Ω"
        />
        <meta
            name="description"
            content="–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ –≤ –º–∞–≥–∞–∑–∏–Ω–µ Talaria - –ø—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –∂–µ–Ω—Å–∫–∞—è –æ–±—É–≤—å –±–æ–ª—å—à–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤"
        />

        <title id="page-title">
            –¢–æ–≤–∞—Ä - Talaria | –ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –∂–µ–Ω—Å–∫–∞—è –æ–±—É–≤—å
        </title>

        <!-- Preconnect for performance -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <!-- Google Fonts -->
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
            rel="stylesheet"
        />

        <!-- Styles -->
        <link href="style.css" rel="stylesheet" />

        <!-- Additional styles for product page -->
        <style>
            .breadcrumb {
                background: var(--background-white);
                padding: 1rem 0;
                border-bottom: 1px solid var(--border-light);
                margin-bottom: 2rem;
            }

            .breadcrumb-list {
                display: flex;
                gap: 0.5rem;
                align-items: center;
                list-style: none;
                color: var(--text-light);
                font-size: 14px;
            }

            .breadcrumb-list a {
                color: var(--accent-color);
                text-decoration: none;
            }

            .breadcrumb-list a:hover {
                text-decoration: underline;
            }

            .product-container {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 4rem;
                margin-bottom: 4rem;
                background: var(--background-white);
                padding: 3rem;
                border-radius: 16px;
                box-shadow: var(--shadow-light);
                border: 1px solid var(--border-light);
            }

            .product-gallery {
                position: relative;
            }

            .main-image-container {
                position: relative;
                width: 100%;
                height: 500px;
                border-radius: 16px;
                overflow: hidden;
                background: var(--background-light);
                margin-bottom: 1rem;
            }

            .main-image {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: var(--transition);
            }

            .main-image:hover {
                transform: scale(1.05);
            }

            .image-fallback-large {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 6rem;
                color: var(--text-muted);
                background: var(--background-light);
            }

            .product-info {
                position: sticky;
                top: 120px;
                height: fit-content;
            }

            .product-brand {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                font-size: 1rem;
                color: var(--accent-color);
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 1px;
                margin-bottom: 1rem;
            }

            .product-title {
                font-size: 2.5rem;
                font-weight: 800;
                color: var(--primary-color);
                line-height: 1.2;
                margin-bottom: 1.5rem;
            }

            .product-description {
                font-size: 1.125rem;
                color: var(--text-light);
                line-height: 1.6;
                margin-bottom: 2rem;
            }

            .product-price {
                display: flex;
                align-items: baseline;
                gap: 1rem;
                margin-bottom: 2rem;
                padding: 1.5rem;
                background: var(--background-light);
                border-radius: 12px;
                border: 2px solid var(--accent-color);
            }

            .price-current {
                font-size: 2.5rem;
                font-weight: 900;
                color: var(--primary-color);
            }

            .price-old {
                font-size: 1.5rem;
                color: var(--text-muted);
                text-decoration: line-through;
            }

            .price-discount {
                background: #e74c3c;
                color: white;
                padding: 4px 12px;
                border-radius: 20px;
                font-size: 14px;
                font-weight: 700;
                text-transform: uppercase;
            }

            .product-features {
                margin-bottom: 2rem;
            }

            .features-title {
                font-size: 1.25rem;
                font-weight: 600;
                color: var(--primary-color);
                margin-bottom: 1rem;
            }

            .features-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            .feature-item {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                padding: 0.75rem;
                background: rgba(212, 175, 55, 0.1);
                border-radius: 8px;
                font-size: 14px;
                color: var(--text-dark);
            }

            .feature-icon {
                font-size: 1.25rem;
            }

            .product-actions {
                display: flex;
                flex-direction: column;
                gap: 1rem;
                margin-bottom: 2rem;
            }

            .btn-primary {
                background: var(--gradient-gold);
                color: white;
                border: none;
                padding: 1rem 2rem;
                border-radius: 12px;
                font-size: 1.125rem;
                font-weight: 700;
                cursor: pointer;
                transition: var(--transition);
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.75rem;
            }

            .btn-primary:hover {
                transform: translateY(-2px);
                box-shadow: var(--shadow-heavy);
            }

            .btn-secondary {
                background: transparent;
                color: var(--accent-color);
                border: 2px solid var(--accent-color);
                padding: 1rem 2rem;
                border-radius: 12px;
                font-size: 1rem;
                font-weight: 600;
                cursor: pointer;
                transition: var(--transition);
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.75rem;
            }

            .btn-secondary:hover {
                background: var(--accent-color);
                color: white;
                transform: translateY(-1px);
            }

            .contact-info {
                background: var(--gradient-brown);
                color: white;
                padding: 2rem;
                border-radius: 12px;
                margin-top: 2rem;
            }

            .contact-title {
                font-size: 1.25rem;
                font-weight: 600;
                margin-bottom: 1rem;
                color: var(--accent-color);
            }

            .contact-methods {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .contact-method {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 0.75rem;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 8px;
                transition: var(--transition);
            }

            .contact-method:hover {
                background: rgba(255, 255, 255, 0.2);
                transform: translateX(5px);
            }

            .contact-method a {
                color: var(--accent-color);
                font-weight: 500;
                text-decoration: none;
            }

            .contact-method a:hover {
                color: white;
            }

            .loading-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                min-height: 400px;
                text-align: center;
            }

            .loading-spinner {
                font-size: 3rem;
                animation: spin 2s linear infinite;
                margin-bottom: 1rem;
            }

            .error-container {
                text-align: center;
                padding: 4rem 2rem;
                color: var(--text-muted);
            }

            .error-icon {
                font-size: 4rem;
                margin-bottom: 1rem;
            }

            .back-button {
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                color: var(--accent-color);
                font-weight: 500;
                text-decoration: none;
                padding: 0.75rem 1.5rem;
                border: 2px solid var(--accent-color);
                border-radius: 25px;
                transition: var(--transition);
                margin-bottom: 2rem;
            }

            .back-button:hover {
                background: var(--accent-color);
                color: white;
            }

            @media (max-width: 768px) {
                .product-container {
                    grid-template-columns: 1fr;
                    gap: 2rem;
                    padding: 1.5rem;
                }

                .main-image-container {
                    height: 400px;
                }

                .product-title {
                    font-size: 2rem;
                }

                .price-current {
                    font-size: 2rem;
                }

                .features-grid {
                    grid-template-columns: 1fr;
                }

                .product-info {
                    position: static;
                }
            }
        </style>

        <!-- Scripts -->
        <script src="config.js"></script>
        <script src="api.js"></script>

        <!-- Favicon -->
        <link
            rel="icon"
            type="image/x-icon"
            href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üë†</text></svg>"
        />
    </head>
    <body>
        <!-- Header -->
        <header>
            <div class="header-top">
                <div class="header-container">
                    üéâ –°–∫–∏–¥–∫–∏ –¥–æ 30% –Ω–∞ –Ω–æ–≤—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é!
                    <a href="index.html#collec">–°–º–æ—Ç—Ä–µ—Ç—å —Å–µ–π—á–∞—Å ‚Üí</a>
                </div>
            </div>

            <div class="header-main">
                <div class="header-container">
                    <div class="logo-section">
                        <a href="index.html" style="text-decoration: none">
                            <div class="logo">Talaria</div>
                            <div class="logo-subtitle">
                                Premium Women's Shoes
                            </div>
                        </a>
                    </div>

                    <nav>
                        <ul class="nav-main">
                            <li><a href="index.html#home">–ì–ª–∞–≤–Ω–∞—è</a></li>
                            <li><a href="index.html#collec">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                            <li><a href="index.html#brands">–ë—Ä–µ–Ω–¥—ã</a></li>
                            <li><a href="index.html#about">–û –Ω–∞—Å</a></li>
                            <li><a href="index.html#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                        </ul>
                    </nav>

                    <div class="header-actions">
                        <button class="action-btn">‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
                        <button class="action-btn primary">
                            üìû –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Breadcrumb -->
        <section class="breadcrumb">
            <div class="header-container">
                <ul class="breadcrumb-list">
                    <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li>‚Ä∫</li>
                    <li><a href="index.html#collec">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                    <li>‚Ä∫</li>
                    <li id="breadcrumb-current">–ó–∞–≥—Ä—É–∑–∫–∞...</li>
                </ul>
            </div>
        </section>

        <main>
            <div class="header-container">
                <a href="index.html#collec" class="back-button">
                    ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ç–∞–ª–æ–≥—É
                </a>

                <!-- Loading State -->
                <div id="loading-container" class="loading-container">
                    <div class="loading-spinner">‚è≥</div>
                    <h2>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–≤–∞—Ä–µ...</h2>
                    <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ</p>
                </div>

                <!-- Error State -->
                <div
                    id="error-container"
                    class="error-container"
                    style="display: none"
                >
                    <div class="error-icon">üòî</div>
                    <h2>–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω</h2>
                    <p>–í–æ–∑–º–æ–∂–Ω–æ, —Ç–æ–≤–∞—Ä –±—ã–ª —É–¥–∞–ª–µ–Ω –∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–µ–≤–µ—Ä–Ω–∞—è</p>
                    <a href="index.html#collec" class="btn-primary">
                        –ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥—É
                    </a>
                </div>

                <!-- Product Content -->
                <div id="product-content" style="display: none">
                    <div class="product-container">
                        <!-- Product Gallery -->
                        <div class="product-gallery">
                            <div class="main-image-container">
                                <img
                                    id="main-image"
                                    class="main-image"
                                    alt=""
                                    style="display: none"
                                />
                                <div
                                    id="image-fallback"
                                    class="image-fallback-large"
                                >
                                    üë†
                                </div>
                            </div>
                        </div>

                        <!-- Product Info -->
                        <div class="product-info">
                            <div class="product-brand" id="product-brand">
                                <span>‚≠ê</span>
                                <span>Premium</span>
                            </div>

                            <h1 class="product-title" id="product-title">
                                –ó–∞–≥—Ä—É–∑–∫–∞...
                            </h1>

                            <p
                                class="product-description"
                                id="product-description"
                            >
                                –ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –∂–µ–Ω—Å–∫–∞—è –æ–±—É–≤—å –∏–∑ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã—Ö
                                –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –¢—â–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–Ω–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –æ—Ç
                                –≤–µ–¥—É—â–∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –¢—É—Ä—Ü–∏–∏ –∏ –ü–µ–∫–∏–Ω–∞ –¥–ª—è
                                –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞ –∏ —Å—Ç–∏–ª—è.
                            </p>

                            <div class="product-price" id="product-price">
                                <span class="price-current">0 —Å—É–º</span>
                            </div>

                            <div class="product-features">
                                <h3 class="features-title">
                                    –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞
                                </h3>
                                <div class="features-grid" id="features-grid">
                                    <div class="feature-item">
                                        <span class="feature-icon">‚ú®</span>
                                        <span>–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</span>
                                    </div>
                                    <div class="feature-item">
                                        <span class="feature-icon">üëü</span>
                                        <span>–ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è –ø–æ–¥–æ—à–≤–∞</span>
                                    </div>
                                    <div class="feature-item">
                                        <span class="feature-icon">üåü</span>
                                        <span>–°—Ç–∏–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω</span>
                                    </div>
                                    <div class="feature-item">
                                        <span class="feature-icon">üî•</span>
                                        <span>–¢—Ä–µ–Ω–¥–æ–≤–∞—è –º–æ–¥–µ–ª—å</span>
                                    </div>
                                </div>
                            </div>

                            <div class="product-actions">
                                <button class="btn-primary" id="order-button">
                                    üìû –ó–∞–∫–∞–∑–∞—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
                                </button>
                                <button class="btn-secondary" id="share-button">
                                    üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                                </button>
                            </div>

                            <div class="contact-info">
                                <h3 class="contact-title">
                                    üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏
                                </h3>
                                <div class="contact-methods">
                                    <div class="contact-method">
                                        <span>üì±</span>
                                        <div>
                                            <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong><br />
                                            <a href="tel:+998908257337"
                                                >+998 90 825 73 37</a
                                            >
                                        </div>
                                    </div>
                                    <div class="contact-method">
                                        <span>üí¨</span>
                                        <div>
                                            <strong>Telegram:</strong><br />
                                            <a
                                                href="https://t.me/talariaUz"
                                                target="_blank"
                                                >@talariaUz</a
                                            >
                                        </div>
                                    </div>
                                    <div class="contact-method">
                                        <span>üì∑</span>
                                        <div>
                                            <strong>Instagram:</strong><br />
                                            <a
                                                href="https://www.instagram.com/talaria_by_zemfira"
                                                target="_blank"
                                                >@talaria_by_zemfira</a
                                            >
                                        </div>
                                    </div>
                                    <div class="contact-method">
                                        <span>üìç</span>
                                        <div>
                                            <strong>–ê–¥—Ä–µ—Å:</strong><br />
                                            –£–ª. –ú–∏—Ä–∑–æ –£–ª—É–≥–±–µ–∫–∞, –¥.99
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer>
            <div class="footer-container">
                <div class="footer-main">
                    <div class="footer-brand">
                        <div class="footer-logo">Talaria</div>
                        <p class="footer-description">
                            –ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω –∂–µ–Ω—Å–∫–æ–π –æ–±—É–≤–∏ –±–æ–ª—å—à–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –≤
                            –¢–∞—à–∫–µ–Ω—Ç–µ. –ú—ã —Å–æ–∑–¥–∞–µ–º –∫–æ–º—Ñ–æ—Ä—Ç –∏ —Å—Ç–∏–ª—å –¥–ª—è –æ—Å–æ–±–µ–Ω–Ω—ã—Ö
                            –∂–µ–Ω—â–∏–Ω —É–∂–µ –±–æ–ª–µ–µ 6 –ª–µ—Ç.
                        </p>
                    </div>

                    <div class="footer-section">
                        <h4>–ö–∞—Ç–∞–ª–æ–≥</h4>
                        <ul class="footer-links">
                            <li><a href="index.html#collec">–ù–æ–≤–∏–Ω–∫–∏</a></li>
                            <li><a href="index.html#collec">–ë–æ—Å–æ–Ω–æ–∂–∫–∏</a></li>
                            <li><a href="index.html#collec">–¢—É—Ñ–ª–∏</a></li>
                            <li><a href="index.html#collec">–°–∞–ø–æ–≥–∏</a></li>
                            <li><a href="index.html#collec">–ö—Ä–æ—Å—Å–æ–≤–∫–∏</a></li>
                        </ul>
                    </div>

                    <div class="footer-section">
                        <h4>–ë—Ä–µ–Ω–¥—ã</h4>
                        <ul class="footer-links">
                            <li><a href="index.html#brands">ZAZA</a></li>
                            <li><a href="index.html#brands">–ï–≤—Ä–æ–º–æ–¥–∞</a></li>
                            <li><a href="index.html#brands">–†–æ–±–∏–Ω</a></li>
                            <li><a href="index.html#brands">–ú–∏—Å—Å –ú–∞—Ä–∏—Å</a></li>
                            <li><a href="index.html#brands">VACS</a></li>
                        </ul>
                    </div>

                    <div class="footer-section">
                        <h4>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</h4>
                        <ul class="footer-links">
                            <li>
                                <a href="tel:+998908257337">90-825-73-37</a>
                            </li>
                            <li>
                                <a href="https://t.me/talariaUz">–¢–µ–ª–µ–≥—Ä–∞–º</a>
                            </li>
                            <li>
                                <a
                                    href="https://www.instagram.com/talaria_by_zemfira"
                                    >Instagram</a
                                >
                            </li>
                            <li>
                                <a href="index.html#contacts">–ê–¥—Ä–µ—Å –º–∞–≥–∞–∑–∏–Ω–∞</a>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="footer-bottom">
                    <p>
                        &copy; 2025 Talaria. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. | –ñ–µ–Ω—Å–∫–∞—è –æ–±—É–≤—å
                        –±–æ–ª—å—à–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –≤ –¢–∞—à–∫–µ–Ω—Ç–µ
                    </p>
                </div>
            </div>
        </footer>

        <!-- JavaScript -->
        <script>
            // –ò–º–ø–æ—Ä—Ç —É—Ç–∏–ª–∏—Ç –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API —Ñ–∞–π–ª–∞
            let currentShoe = null;
            let shoeId = null;
            let favorites = JSON.parse(
                localStorage.getItem("talaria_favorites") || "[]",
            );

            // –ü–æ–ª—É—á–µ–Ω–∏–µ ID —Ç–æ–≤–∞—Ä–∞ –∏–∑ URL
            function getShoeIdFromUrl() {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get("id");
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞
            async function loadShoeData() {
                const loadingContainer =
                    document.getElementById("loading-container");
                const errorContainer =
                    document.getElementById("error-container");
                const productContent =
                    document.getElementById("product-content");

                try {
                    shoeId = getShoeIdFromUrl();

                    if (!shoeId) {
                        throw new Error("ID —Ç–æ–≤–∞—Ä–∞ –Ω–µ —É–∫–∞–∑–∞–Ω");
                    }

                    // –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ sessionStorage (–±—ã—Å—Ç—Ä–µ–µ)
                    const cachedShoe = sessionStorage.getItem("current_shoe");
                    if (cachedShoe) {
                        const parsedShoe = JSON.parse(cachedShoe);
                        if (parsedShoe.documentId === shoeId) {
                            currentShoe = parsedShoe;
                            renderShoeData();
                            return;
                        }
                    }

                    // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ API
                    if (typeof strapiAPI !== "undefined") {
                        currentShoe = await strapiAPI.fetchShoe(shoeId);
                        if (currentShoe) {
                            sessionStorage.setItem(
                                "current_shoe",
                                JSON.stringify(currentShoe),
                            );
                            renderShoeData();
                            return;
                        }
                    }

                    throw new Error("–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω");
                } catch (error) {
                    console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–∞:", error);
                    loadingContainer.style.display = "none";
                    errorContainer.style.display = "block";
                }
            }

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞
            function renderShoeData() {
                const loadingContainer =
                    document.getElementById("loading-container");
                const productContent =
                    document.getElementById("product-content");

                if (!currentShoe) return;

                // –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
                loadingContainer.style.display = "none";
                productContent.style.display = "block";

                // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±—Ä–µ–Ω–¥–µ –∏ —Ü–µ–Ω–µ
                const brand = getBrand(currentShoe.name);
                const price = generatePrice();

                // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                document.title = `${currentShoe.name} - Talaria | –ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –∂–µ–Ω—Å–∫–∞—è –æ–±—É–≤—å`;
                document.getElementById("page-title").textContent =
                    `${currentShoe.name} - Talaria`;

                // –û–±–Ω–æ–≤–ª—è–µ–º breadcrumb
                document.getElementById("breadcrumb-current").textContent =
                    currentShoe.name;

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                const mainImage = document.getElementById("main-image");
                const imageFallback = document.getElementById("image-fallback");

                if (currentShoe.photo && currentShoe.photo.length > 0) {
                    const imageUrl = `${CONFIG?.STRAPI_BASE_URL || "http://localhost:1337"}${currentShoe.photo[0].formats?.large?.url || currentShoe.photo[0].url}`;
                    mainImage.src = imageUrl;
                    mainImage.alt = currentShoe.name;
                    mainImage.style.display = "block";
                    imageFallback.style.display = "none";

                    mainImage.onerror = function () {
                        this.style.display = "none";
                        imageFallback.style.display = "flex";
                    };
                } else {
                    imageFallback.style.display = "flex";
                }

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ
                document.getElementById("product-brand").innerHTML =
                    `<span>${brand.icon}</span><span>${brand.name}</span>`;
                document.getElementById("product-title").textContent =
                    currentShoe.name;

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É
                const priceContainer = document.getElementById("product-price");
                let priceHTML = `<span class="price-current">${formatPrice(price.current)} —Å—É–º</span>`;
                if (price.old) {
                    priceHTML += `<span class="price-old">${formatPrice(price.old)} —Å—É–º</span>`;
                }
                if (price.discount) {
                    priceHTML += `<span class="price-discount">-${price.discount}%</span>`;
                }
                priceContainer.innerHTML = priceHTML;

                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞
                const features = getFeatures(currentShoe.name);
                const featuresGrid = document.getElementById("features-grid");
                featuresGrid.innerHTML = features
                    .map(
                        (feature) => `
                    <div class="feature-item">
                        <span class="feature-icon">‚ú®</span>
                        <span>${feature}</span>
                    </div>
                `,
                    )
                    .join("");

                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
                updateFavoriteButton();
            }

            // –£—Ç–∏–ª–∏—Ç—ã (–∫–æ–ø–∏–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞)
            function getBrand(name) {
                const brands = {
                    ZAZA: { name: "ZAZA", icon: "üëë" },
                    –µ–≤—Ä–æ–º–æ–¥–∞: { name: "–ï–≤—Ä–æ–º–æ–¥–∞", icon: "‚ú®" },
                    —Ä–æ–±–∏–Ω: { name: "–†–æ–±–∏–Ω", icon: "üåü" },
                    –º–∞—Ä–∏—Å: { name: "–ú–∏—Å—Å –ú–∞—Ä–∏—Å", icon: "üíé" },
                    vacs: { name: "VACS", icon: "üî•" },
                };

                const lowerName = name.toLowerCase();
                for (const [key, brand] of Object.entries(brands)) {
                    if (lowerName.includes(key.toLowerCase())) {
                        return brand;
                    }
                }

                return { name: "Premium", icon: "‚≠ê" };
            }

            function getFeatures(name) {
                const features = [
                    "–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã",
                    "–ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è –ø–æ–¥–æ—à–≤–∞",
                ];
                const lowerName = name.toLowerCase();

                if (
                    lowerName.includes("–±–æ—Å–æ–Ω–æ–∂–∫–∏") ||
                    lowerName.includes("—Å–∞–Ω–¥–∞–ª–∏")
                ) {
                    features.push("–õ–µ—Ç–Ω—è—è –∫–æ–ª–ª–µ–∫—Ü–∏—è");
                }
                if (lowerName.includes("—Ç—É—Ñ–ª–∏")) {
                    features.push("–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å—Ç–∏–ª—å");
                }
                if (
                    lowerName.includes("—Å–∞–ø–æ–≥–∏") ||
                    lowerName.includes("–±–æ—Ç–∏–Ω–∫–∏")
                ) {
                    features.push("–ó–∏–º–Ω—è—è –∫–æ–ª–ª–µ–∫—Ü–∏—è");
                }
                if (lowerName.includes("–∫—Ä–æ—Å—Å–æ–≤–∫–∏")) {
                    features.push("–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π —Å—Ç–∏–ª—å");
                }

                features.push("–°—Ç–∏–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω");
                return features;
            }

            function generatePrice() {
                const basePrice = Math.floor(Math.random() * 500000) + 200000;
                const hasDiscount = Math.random() > 0.7;

                if (hasDiscount) {
                    const discount = Math.floor(Math.random() * 30) + 10;
                    const discountPrice = Math.floor(
                        (basePrice * (100 - discount)) / 100,
                    );
                    return {
                        current: discountPrice,
                        old: basePrice,
                        discount: discount,
                    };
                }

                return {
                    current: basePrice,
                    old: null,
                    discount: null,
                };
            }

            function formatPrice(price) {
                return new Intl.NumberFormat("uz-UZ", {
                    style: "decimal",
                    minimumFractionDigits: 0,
                }).format(price);
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            function toggleFavorite() {
                if (!shoeId) return;

                const favoriteButton =
                    document.getElementById("favorite-button");
                const index = favorites.indexOf(shoeId);

                if (index > -1) {
                    favorites.splice(index, 1);
                    favoriteButton.innerHTML = "‚ù§Ô∏è –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ";
                    showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ! üíî");
                } else {
                    favorites.push(shoeId);
                    favoriteButton.innerHTML = "üíñ –í –∏–∑–±—Ä–∞–Ω–Ω–æ–º";
                    showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ! ‚ù§Ô∏è");
                }

                localStorage.setItem(
                    "talaria_favorites",
                    JSON.stringify(favorites),
                );
                updateFavoriteButton();
            }

            function updateFavoriteButton() {
                if (!shoeId) return;

                const favoriteButton =
                    document.getElementById("favorite-button");
                if (favorites.includes(shoeId)) {
                    favoriteButton.innerHTML = "üíñ –í –∏–∑–±—Ä–∞–Ω–Ω–æ–º";
                    favoriteButton.style.background = "var(--accent-color)";
                    favoriteButton.style.color = "white";
                } else {
                    favoriteButton.innerHTML = "‚ù§Ô∏è –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ";
                    favoriteButton.style.background = "transparent";
                    favoriteButton.style.color = "var(--accent-color)";
                }
            }

            function makeOrder() {
                if (!currentShoe) return;

                const orderText = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ú–µ–Ω—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç ${currentShoe.name}. –ú–æ–∂–µ—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–∑–º–µ—Ä–∞—Ö –∏ –Ω–∞–ª–∏—á–∏–∏?`;
                const phoneNumber = "+998908257337";
                const telegramUrl = `https://t.me/talariaUz`;

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ —Å–≤—è–∑–∏
                const choice = confirm(
                    "–ö–∞–∫ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–≤—è–∑–∞—Ç—å—Å—è?\n\n–û–ö - –ü–æ–∑–≤–æ–Ω–∏—Ç—å\n–û—Ç–º–µ–Ω–∞ - –ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram",
                );

                if (choice) {
                    window.location.href = `tel:${phoneNumber}`;
                } else {
                    window.open(telegramUrl, "_blank");
                }
            }

            function shareProduct() {
                if (!currentShoe) return;

                const shareData = {
                    title: `${currentShoe.name} - Talaria`,
                    text: `–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —ç—Ç—É –∫—Ä–∞—Å–∏–≤—É—é –æ–±—É–≤—å –≤ –º–∞–≥–∞–∑–∏–Ω–µ Talaria!`,
                    url: window.location.href,
                };

                if (navigator.share) {
                    navigator.share(shareData);
                } else {
                    // Fallback –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤ –±–µ–∑ Web Share API
                    const url = encodeURIComponent(window.location.href);
                    const text = encodeURIComponent(
                        `${currentShoe.name} - Talaria`,
                    );

                    const shareOptions = [
                        {
                            name: "Telegram",
                            url: `https://t.me/share/url?url=${url}&text=${text}`,
                        },
                        {
                            name: "WhatsApp",
                            url: `https://wa.me/?text=${text}%20${url}`,
                        },
                        { name: "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É", action: "copy" },
                    ];

                    const choice = prompt(
                        "–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø–æ–¥–µ–ª–∏—Ç—å—Å—è:\n1. Telegram\n2. WhatsApp\n3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É\n\n–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä (1-3):",
                    );

                    switch (choice) {
                        case "1":
                            window.open(shareOptions[0].url, "_blank");
                            break;
                        case "2":
                            window.open(shareOptions[1].url, "_blank");
                            break;
                        case "3":
                            navigator.clipboard
                                .writeText(window.location.href)
                                .then(() => {
                                    showNotification("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! üìã");
                                });
                            break;
                    }
                }
            }

            function showNotification(message) {
                const notification = document.createElement("div");
                notification.className = "notification";
                notification.innerHTML = `
                    <div class="notification-content">
                        <span>${message}</span>
                        <button onclick="this.parentElement.parentElement.remove()">√ó</button>
                    </div>
                `;
                notification.style.cssText = `
                    position: fixed;
                    top: 100px;
                    right: 20px;
                    background: var(--gradient-gold);
                    color: white;
                    padding: 15px 20px;
                    border-radius: 10px;
                    box-shadow: var(--shadow-heavy);
                    z-index: 10000;
                    animation: slideInRight 0.3s ease;
                `;

                document.body.appendChild(notification);

                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.style.animation =
                            "slideOutRight 0.3s ease";
                        setTimeout(() => notification.remove(), 300);
                    }
                }, 3000);
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            document.addEventListener("DOMContentLoaded", function () {
                loadShoeData();

                // –ü—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π –∫ –∫–Ω–æ–ø–∫–∞–º
                document
                    .getElementById("order-button")
                    .addEventListener("click", makeOrder);
                document
                    .getElementById("favorite-button")
                    .addEventListener("click", toggleFavorite);
                document
                    .getElementById("share-button")
                    .addEventListener("click", shareProduct);

                // Smooth scrolling –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                document
                    .querySelectorAll('a[href^="#"], a[href*="#"]')
                    .forEach((anchor) => {
                        anchor.addEventListener("click", function (e) {
                            const href = this.getAttribute("href");
                            if (
                                href.includes("#") &&
                                !href.includes("index.html")
                            ) {
                                e.preventDefault();
                            }
                        });
                    });
            });

            // –°—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
            const styles = document.createElement("style");
            styles.textContent = `
                @keyframes slideInRight {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }

                @keyframes slideOutRight {
                    from {
                        transform: translateX(0);
                        opacity: 1;
                    }
                    to {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                }

                .notification-content {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    gap: 10px;
                }

                .notification-content button {
                    background: none;
                    border: none;
                    color: white;
                    font-size: 18px;
                    cursor: pointer;
                    padding: 0;
                    width: 20px;
                    height: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
            `;
            document.head.appendChild(styles);
        </script>
    </body>
</html>
